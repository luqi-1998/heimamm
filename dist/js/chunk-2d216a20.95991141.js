(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216a20"],{c2fa:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"subject"},[a("el-card",[a("el-form",{ref:"formRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{label:"学科编号",prop:"rid","label-width":"70px"}},[a("el-input",{model:{value:e.form.eid,callback:function(t){e.$set(e.form,"eid",t)},expression:"form.eid"}})],1),a("el-form-item",{attrs:{label:"学科名称",prop:"name","label-width":"70px"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"创建者",prop:"username","label-width":"70px"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status","label-width":"70px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{value:0,label:"禁用"}}),a("el-option",{attrs:{value:1,label:"启用"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.sreach}},[e._v("搜索")]),a("el-button",{on:{click:e.close}},[e._v("清除")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("+新增学科")])],1)],1)],1),a("el-card",{staticStyle:{marginTop:"20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{prop:"rid",label:"学科编号",width:"120"}}),a("el-table-column",{attrs:{prop:"name",label:"学科名称",width:"150"}}),a("el-table-column",{attrs:{prop:"short_name",label:"简称",width:"120"}}),a("el-table-column",{attrs:{prop:"username",label:"创建者",width:"120"}}),a("el-table-column",{attrs:{prop:"create_time",label:"创建日期",width:"180"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:"1"==t.row.status?"color:#000":"color:red"},[e._v(e._s("1"==t.row.status?"启用":"禁用"))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.updata(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"small",type:"1"==t.row.status?"info":"success"},on:{click:function(a){return e.changeRole(t.row.id)}}},[e._v(e._s("1"==t.row.status?"禁用":"启用"))]),a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.del(t.row.id)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[2,5,8,10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("add-updata",{ref:"addupdata"})],1)},n=[],s=a("5530"),o=(a("96cf"),a("1da1")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"学科编号","label-width":"80px",prop:"rid"}},[a("el-input",{model:{value:e.form.rid,callback:function(t){e.$set(e.form,"rid",t)},expression:"form.rid"}})],1),a("el-form-item",{attrs:{label:"学科名称","label-width":"80px",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"学科简称","label-width":"80px",prop:"short_name"}},[a("el-input",{model:{value:e.form.short_name,callback:function(t){e.$set(e.form,"short_name",t)},expression:"form.short_name"}})],1),a("el-form-item",{attrs:{label:"学科简介","label-width":"80px",prop:"intro"}},[a("el-input",{model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),a("el-form-item",{attrs:{label:"学科备注","label-width":"80px",prop:"remark"}},[a("el-input",{model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addedit}},[e._v("确 定")])],1)],1)},l=[],u={name:"subjectupdata",data:function(){return{title:"新增学科",dialogFormVisible:!1,form:{rid:"",name:"",short_name:"",intro:"",remark:""},formRules:{rid:[{required:!0,message:"学科编号不能为空",trigger:"blur"}],name:[{required:!0,message:"学科名称不能为空",trigger:"blur"}],short_name:[{required:!0,message:"学科简称不能为空",trigger:"blur"}],intro:[{required:!0,message:"学科简介不能为空",trigger:"blur"}]}}},watch:{dialogFormVisible:function(e){e||this.$refs.formRef.resetFields()}},methods:{addedit:function(){var e=this;"新增学科"===this.title?this.$refs.formRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",e.$message.error("验证不通过"));case 2:return delete e.form.id,t.next=5,e.$axios.post("/subject/add",e.form);case 5:r=t.sent,200===r.code&&(e.$message.success("新增成功"),e.$parent.pageIndex=1,e.$parent.getData(),e.dialogFormVisible=!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.$refs.formRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",e.$message.error("验证不通过"));case 2:return t.next=4,e.$axios.post("/subject/edit",e.form);case 4:r=t.sent,200===r.code&&(e.$message.success("修改成功"),e.$parent.pageIndex=1,e.$parent.getData(),e.dialogFormVisible=!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},c=u,m=a("2877"),d=Object(m["a"])(c,i,l,!1,null,null,null),p=d.exports,f={name:"subject",components:{addUpdata:p},data:function(){return{form:{username:"",eid:"",status:"",name:""},tableData:[],total:10,pageSize:2,pageIndex:1}},methods:{handleCurrentChange:function(e){this.pageIndex=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},changeRole:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$axios.post("/subject/status",{id:e});case 2:r=a.sent,200===r.code&&(t.$message.success("状态更新成功"),t.getData());case 4:case"end":return a.stop()}}),a)})))()},del:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$axios.post("/subject/remove",{id:e});case 2:r=a.sent,200===r.code&&(t.$message.success("删除成功"),t.pageIndex=1,t.getData());case 4:case"end":return a.stop()}}),a)})))()},sreach:function(){this.pageIndex=1,this.getData()},close:function(){this.$refs.formRef.resetFields(),this.pageIndex=1,this.getData()},add:function(){this.$refs.addupdata.title="新增学科",this.$refs.addupdata.dialogFormVisible=!0},updata:function(e){var t=this;this.$refs.addupdata.dialogFormVisible=!0,this.$nextTick((function(){t.$refs.addupdata.title="修改学科",t.$refs.addupdata.form=JSON.parse(JSON.stringify(e))}))},getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/subject/list",{params:Object(s["a"])(Object(s["a"])({},e.form),{},{page:e.pageIndex,limit:e.pageSize})});case 2:a=t.sent,e.tableData=a.data.items,e.total=a.data.pagination.total;case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.getData()}},b=f,h=Object(m["a"])(b,r,n,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d216a20.95991141.js.map